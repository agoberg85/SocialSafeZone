<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
 
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog - SocialSafeZone</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <link rel="stylesheet" href="static/style.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>

    <header class="main-header">
        <nav>
            <a href="index.html" class="logo">SocialSafeZone</a>
            <div class="nav-panel">
                <div></div>
                <ul class="nav-links">
                    <li><a href="app.html" class="nav-link">Safezone Tool</a></li>
                    <li><a href="pricing.html" class="nav-link">Pricing</a></li>
                    <li><a href="blog.html" class="nav-link">Blog</a></li>
                    <li><a href="contact.html" class="nav-link">Contact</a></li>
                </ul>
                <div id="user-session-cta">
                    <!-- Default state (user is logged out) -->
                    <a href="login.html" id="login-button-nav" class="btn btn-primary nav-cta">Login / Sign Up</a>
    
                    <!-- Logged-in state (hidden by default) -->
                    <div id="user-menu" class="hidden">
                        <a href="profile.html" id="welcome-link" class="nav-link">Welcome!</a>
                        <button id="logout-button" class="btn btn-danger">Logout</button>
                    </div>
    
                </div>
            </div>
            <button class="hamburger">
                <span class="material-icons burger-menu" style="vertical-align: middle; font-size: 1.2rem; margin-right: 0.5rem;">menu</span>
            </button>
        </nav>
    </header>

    <main class="container topgap">
        <section>
            <div class="text-center">
                <h1>The SocialSafeZone Blog</h1>
                <p class="subtitle">Tips, updates, and best practices for social media ad creative.</p>
            </div>
        </section>

        <section class="blog-list">
            <!-- The container where posts will be injected -->
            <div id="blog-grid-container" class="blog-grid">
                <p>Loading articles...</p>
            </div>
        </section>
    </main>

    <footer class="main-footer">
        <div class="container">
            <p>&copy; 2025 SocialSafeZone. All rights reserved. | <a href="terms.html">Terms of Service</a> | <a href="privacy.html">Privacy Policy</a></p>
        </div>
    </footer>

        <script src="static/config.js"></script>
    <script src="static/main.js"></script>
<script>
document.addEventListener('DOMContentLoaded', async () => {
    const container = document.getElementById('blog-grid-container');
    const supabase = window.app.supabaseClient;

    // Fetch posts
    const { data: posts, error } = await supabase
        .from('blog_posts')
        .select('*')
        .eq('is_published', true)
        .order('created_at', { ascending: false });

    if (error) {
        console.error(error);
        container.innerHTML = '<p>Error loading posts.</p>';
        return;
    }

    if (posts.length === 0) {
        container.innerHTML = '<p>No articles found.</p>';
        return;
    }

    // Clear loading text
    container.innerHTML = '';

    // Generate HTML for each post
    posts.forEach(post => {
        const date = new Date(post.created_at).toLocaleDateString();
        
        const card = `
            <div class="article-card">
                <h2>${escapeHtml(post.title)}</h2>
                <p class="article-meta">Posted on ${date}</p>
                <p class="article-excerpt">${escapeHtml(post.excerpt)}</p>
                <!-- Link to the generic template with a query parameter -->
                <a href="blog/${post.slug}.html" class="btn btn-primary">Read More</a>
            </div>
        `;
        container.innerHTML += card;
    });

    // Simple security helper
    function escapeHtml(text) {
        if (!text) return '';
        return text
            .replace(/&/g, "&amp;")
            .replace(/</g, "&lt;")
            .replace(/>/g, "&gt;")
            .replace(/"/g, "&quot;")
            .replace(/'/g, "&#039;");
    }
});
</script>     
    <script defer src="/_vercel/insights/script.js"></script>
</body>
</html>